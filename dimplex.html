<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dimplex Quantum Report Helper</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: #f4f6f8;
      padding: 20px;
      line-height: 1.4;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    .subtitle {
      text-align: center;
      font-size: 13px;
      color: #555;
      margin-bottom: 20px;
    }

    .tabs {
      max-width: 900px;
      margin: 0 auto 15px auto;
      display: flex;
      gap: 8px;
    }

    .tabs button {
      flex: 1;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #e9ecf1;
      cursor: pointer;
      font-size: 14px;
    }

    .tabs button.active {
      background: #2f6fed;
      color: #fff;
      border-color: #2f6fed;
    }

    .panel {
      max-width: 900px;
      margin: 0 auto;
      background: #ffffff;
      padding: 20px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .row {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 15px;
    }

    .row h2 {
      margin: 0 0 8px 0;
      font-size: 16px;
      color: #333;
    }

    .row-desc {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
    }

    .inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
    }

    label {
      font-size: 13px;
      color: #333;
      display: block;
    }

    .help {
      font-size: 11px;
      color: #777;
    }

    input {
      width: 100%;
      padding: 5px;
      margin-top: 4px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 13px;
      max-width: 140px;
    }

    .note {
      font-size: 12px;
      color: #777;
      margin-top: 6px;
    }

    .warning {
      color: #b30000;
      font-size: 12px;
      margin-top: 6px;
    }

    .size-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 6px;
      font-size: 11px;
    }

    .size-table th,
    .size-table td {
      border: 1px solid #ddd;
      padding: 4px 6px;
      text-align: center;
    }

    .size-table th {
      background: #f4f6f8;
    }

    /* Mobile view overrides */
    body.mobile .panel {
      padding: 15px;
    }

    body.mobile .inputs {
      grid-template-columns: 1fr;
    }

    body.mobile input {
      max-width: 100%;
      font-size: 16px;
      padding: 10px;
    }

    body.mobile .row h2 {
      font-size: 15px;
    }
  </style>
</head>
<body>
  <div class="tabs">
    <button id="desktopTab" class="active" onclick="setView('desktop')">Desktop view</button>
    <button id="mobileTab" onclick="setView('mobile')">Mobile view</button>
  </div>

  <h1>Dimplex Quantum Report Helper</h1>
  <p class="subtitle">
    Type in the numbers exactly as shown on the heater’s report screen and this page will explain what they mean.
  </p>

  <div class="panel">

    <!-- Row A -->
    <div class="row">
      <h2>Row A – System & Installer settings</h2>
      <p class="row-desc">
        Row A is four digits in one line. Enter each digit separately below.
      </p>
      <div class="inputs">
        <div>
          <label for="a1">
            Digit 1 – Software calculator
          </label>
          <span class="help">Just copy the digit shown – used internally by the heater.</span>
          <input type="number" id="a1" min="0" />
        </div>
        <div>
          <label for="a2">
            Digit 2 – Heater size
          </label>
          <span class="help">1 = 500 W, 2 = 700 W, 3 = 1.0 kW, 4 = 1.25 kW, 5 = 1.5 kW.</span>
          <input type="number" id="a2" min="1" max="5" />
          <table class="size-table">
            <tr><th>Digit</th><th>Model</th><th>Output</th></tr>
            <tr><td>1</td><td>QM050</td><td>500 W</td></tr>
            <tr><td>2</td><td>QM070</td><td>700 W</td></tr>
            <tr><td>3</td><td>QM100</td><td>1.0 kW</td></tr>
            <tr><td>4</td><td>QM125</td><td>1.25 kW</td></tr>
            <tr><td>5</td><td>QM150</td><td>1.5 kW</td></tr>
          </table>
        </div>
        <div>
          <label for="a3">
            Digit 3 – Extra charge
          </label>
          <span class="help">Installer “extra charge” setting (0–9). Higher numbers usually mean more stored heat.</span>
          <input type="number" id="a3" min="0" max="9" />
        </div>
        <div>
          <label for="a4">
            Digit 4 – Clock calibration
          </label>
          <span class="help">Used to fine‑tune the internal clock, typically 0–9.</span>
          <input type="number" id="a4" min="0" max="9" />
        </div>
      </div>
    </div>

    <!-- Row B -->
    <div class="row">
      <h2>Row B – Core charge time (last night)</h2>
      <p class="row-desc">
        This is the total time the heater was actually charging on off‑peak last night.
      </p>
      <div class="inputs">
        <div>
          <label for="b1">
            Core charge time last night (minutes)
          </label>
          <span class="help">Example: enter 300 if the display shows 300.</span>
          <input type="number" id="b1" min="0" />
        </div>
      </div>
    </div>

    <!-- Row C -->
    <div class="row">
      <h2>Row C – Room temperatures</h2>
      <p class="row-desc">
        Row C shows the actual room temperature now and the temperature at 23:59 (11:59 pm) last night.
      </p>
      <div class="inputs">
        <div>
          <label for="c1">
            Digit 1 – Current room temperature (°C)
          </label>
          <input type="number" step="0.1" id="c1" />
        </div>
        <div>
          <label for="c2">
            Digit 2 – Room temperature at 23:59 (°C)
          </label>
          <input type="number" step="0.1" id="c2" />
        </div>
      </div>
    </div>

    <!-- Row D -->
    <div class="row">
      <h2>Row D – Comfort hours tomorrow</h2>
      <p class="row-desc">
        Total number of “comfort on” hours programmed for the following day.
      </p>
      <div class="inputs">
        <div>
          <label for="d1">
            Comfort ON hours programmed (tomorrow)
          </label>
          <span class="help">Ideally this should not exceed 14 hours.</span>
          <input type="number" id="d1" min="0" max="24" />
        </div>
      </div>
      <div id="comfortWarning" class="warning" style="display:none;">
        Comfort hours are above 14 – the heater may be leaning heavily on direct electric output instead of stored heat.
      </div>
    </div>

    <!-- Row E -->
    <div class="row">
      <h2>Row E – Heater temperature setting</h2>
      <p class="row-desc">
        How warm you are asking the heater to keep the room now and what it was set to at 23:59 last night.
      </p>
      <div class="inputs">
        <div>
          <label for="e1">
            Digit 1 – Current room temperature setting (°C)
          </label>
          <input type="number" step="0.5" id="e1" />
        </div>
        <div>
          <label for="e2">
            Digit 2 – Room temperature setting at 23:59 (°C)
          </label>
          <input type="number" step="0.5" id="e2" />
        </div>
      </div>
    </div>

    <!-- Row F -->
    <div class="row">
      <h2>Row F – Core temperature</h2>
      <p class="row-desc">
        Core brick temperature now and what it was at 23:59. This shows how much stored energy has been used.
      </p>
      <div class="inputs">
        <div>
          <label for="f1">
            Digit 1 – Current core temperature (°C)
          </label>
          <input type="number" id="f1" />
        </div>
        <div>
          <label for="f2">
            Digit 2 – Core temperature at 23:59 (°C)
          </label>
          <input type="number" id="f2" />
        </div>
      </div>
    </div>

    <!-- Row G -->
    <div class="row">
      <h2>Row G – Not used</h2>
      <p class="note">
        Row G is not used on this report screen – you do not need to enter anything for it.
      </p>
    </div>

    <!-- Row H -->
    <div class="row">
      <h2>Row H – Historic core charge</h2>
      <p class="row-desc">
        How long the heater charged two and three nights ago. Useful to see trends in demand.
      </p>
      <div class="inputs">
        <div>
          <label for="h1">
            Digit 1 – Core charge three nights ago (minutes)
          </label>
          <input type="number" id="h1" min="0" />
        </div>
        <div>
          <label for="h2">
            Digit 2 – Core charge two nights ago (minutes)
          </label>
          <input type="number" id="h2" min="0" />
        </div>
      </div>
    </div>

    <!-- Create report -->
    <div style="text-align:center; margin-top:20px;">
      <button onclick="generateReport()" style="padding:10px 20px; font-size:14px; border:none; border-radius:6px; background:#2f6fed; color:#fff; cursor:pointer;">
        Create explanation
      </button>
    </div>

    <!-- Report -->
    <div id="report" class="row" style="margin-top:20px; display:none;">
      <h2>Report explanation</h2>
      <div id="reportContent" class="note"></div>
    </div>

  </div>

<script>
function setView(view) {
  document.body.classList.remove('mobile');
  document.getElementById('desktopTab').classList.remove('active');
  document.getElementById('mobileTab').classList.remove('active');

  if (view === 'mobile') {
    document.body.classList.add('mobile');
    document.getElementById('mobileTab').classList.add('active');
  } else {
    document.getElementById('desktopTab').classList.add('active');
  }
}

function v(id) {
  const el = document.getElementById(id);
  return el && el.value !== "" ? el.value : "—";
}

function heaterSizeText(digit) {
  switch (digit) {
    case "1": return "500 W (QM050)";
    case "2": return "700 W (QM070)";
    case "3": return "1.0 kW (QM100)";
    case "4": return "1.25 kW (QM125)";
    case "5": return "1.5 kW (QM150)";
    default:  return "unknown size";
  }
}

function generateReport() {
  const report = document.getElementById('report');
  const content = document.getElementById('reportContent');

  const bMinutes = parseInt(v('b1'), 10);
  const dHours   = parseFloat(v('d1'));
  const h1Min    = parseInt(v('h1'), 10);
  const h2Min    = parseInt(v('h2'), 10);

  // Simple comfort warning
  const comfortWarning = document.getElementById('comfortWarning');
  if (!isNaN(dHours) && dHours > 14) {
    comfortWarning.style.display = 'block';
  } else {
    comfortWarning.style.display = 'none';
  }

  const heaterSize = heaterSizeText(v('a2'));

  // Optional: hook for your own debugging / extra logic
  console.log("Raw values:", {
    A: [v('a1'), v('a2'), v('a3'), v('a4')],
    B: bMinutes,
    C: [v('c1'), v('c2')],
    D: dHours,
    E: [v('e1'), v('e2')],
    F: [v('f1'), v('f2')],
    H: [h1Min, h2Min]
  });

  content.innerHTML = `
    <h3>Summary of what you entered</h3>
    <ul>
      <li><strong>Row A:</strong> Software calculator: ${v('a1')}, heater size digit: ${v('a2')} (${heaterSize}), extra charge: ${v('a3')}, clock calibration: ${v('a4')}.</li>
      <li><strong>Row B:</strong> Core charge last night: ${v('b1')} minutes.</li>
      <li><strong>Row C:</strong> Current room temperature: ${v('c1')} °C, room temperature at 23:59: ${v('c2')} °C.</li>
      <li><strong>Row D:</strong> Comfort ON hours programmed for tomorrow: ${v('d1')} hours.</li>
      <li><strong>Row E:</strong> Current temperature setting: ${v('e1')} °C, temperature setting at 23:59: ${v('e2')} °C.</li>
      <li><strong>Row F:</strong> Current core temperature: ${v('f1')} °C, core temperature at 23:59: ${v('f2')} °C.</li>
      <li><strong>Row H:</strong> Core charge three nights ago: ${v('h1')} minutes, two nights ago: ${v('h2')} minutes.</li>
    </ul>

    <h3>How to read this</h3>

    <p><strong>Heater size and setup (Row A)</strong><br>
    The heater size digit of <strong>${v('a2')}</strong> corresponds to <strong>${heaterSize}</strong>, which should match the label on the side of the heater. If this does not match the actual model, the heater may be sized or configured incorrectly.</p>

    <p><strong>Charging behaviour (Row B &amp; H)</strong><br>
    Last night the heater charged for <strong>${v('b1')} minutes</strong>. Comparing this with <strong>${v('h1')} minutes</strong> (three nights ago) and <strong>${v('h2')} minutes</strong> (two nights ago) shows whether the heater is asking for more or less stored heat over time.</p>

    <p><strong>Room temperatures (Row C)</strong><br>
    If the room was <strong>${v('c2')} °C</strong> at 23:59 and is now <strong>${v('c1')} °C</strong>, a large drop suggests high heat loss or not enough stored heat. If the drop is small, the building is keeping the heat well.</p>

    <p><strong>Comfort hours (Row D)</strong><br>
    The heater is programmed for <strong>${v('d1')} comfort hours</strong> tomorrow. Values much above 14 hours usually mean the heater is relying heavily on direct electric output to keep up, which costs more than using stored off‑peak heat.</p>

    <p><strong>Temperature settings (Row E)</strong><br>
    The current setpoint is <strong>${v('e1')} °C</strong> and it was <strong>${v('e2')} °C</strong> at 23:59. If you keep winding this up to chase the heat, the heater will respond by charging harder on future nights.</p>

    <p><strong>Core performance (Row F)</strong><br>
    The core has dropped from <strong>${v('f2')} °C</strong> at 23:59 to <strong>${v('f1')} °C</strong> now. A big drop means the stored energy is being used; if the core is still very hot late in the day but the room is cold, heat is not being delivered effectively (blocked grille, poor airflow, or controls).</p>

    <p><strong>Putting it all together</strong><br>
    By looking at charge time (Row B &amp; H), room temperature behaviour (Row C), comfort hours (Row D), and core temperature (Row F), you can see whether the heater is the right size, is programmed sensibly, or is struggling because of the building heat loss.</p>
  `;

  report.style.display = 'block';
}
</script>

</body>
</html>
